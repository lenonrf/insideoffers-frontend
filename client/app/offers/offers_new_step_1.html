<!--<div style="width: 100%;" id="steps-uid-0-p-0" style="display: block;"
    ng-controller="OffersWizardContentCtrl as ctrl">-->

<div style="width: 100%;" id="steps-uid-0-p-0" style="display: block;">

    <form name="ctrl.form">

    

        <div class="panel panel-default" style="margin-top: 20px;">
        <div class="panel-heading">
            <h3 class="panel-title">Affiliation</h3>
        </div>
        <div class="panel-body" style="padding: 0px;">


            <div class="row">
                <div class="col-lg-12">


                    <div layout="column" ng-cloak class="md-inline-form">
                        <md-content layout-padding layout-margin layout-fill>

                            <div layout layout-sm="column" ng-repeat="item in offer.affiliationData track by $index">
                               
                                
                                <div  style="width: 100%; background-color: #f2f7f7;     padding: 25px;">


                                    <div layout layout-sm="column"> 
                                                                    
                                        <md-input-container  flex="100"  style="margin: 0px; width: 100%;" >
                                            <label>Affiliation {{$index+1}}</label>

                                            <md-select required ng-model="offer.affiliationData[$index].affiliation">
                                                
                                                <md-option ng-repeat="aff in affiliation" 
                                                    value="{{aff._id}}">{{aff.name}}
                                                </md-option>
                                            
                                            </md-select>
                                            
                                            <div ng-messages="ctrl.form.affiliation.$error" role="alert" multiple>
                                                <div ng-message="required" class="my-message">You must supply a Affiliation
                                                    name.
                                                </div>
                                            </div>

                                        </md-input-container>
                                    </div>

                                    <div layout layout-sm="column">


                                        <md-checkbox flex="25" ng-model="item.isSponsoring" ng-change="setAffiliationDelivery(item, $index)" class="md-primary" aria-label="Sponsoring" style="color: rgba(0,0,0,0.26);"> <b>Sponsoring</b> &nbsp;&nbsp;&nbsp;&nbsp;</md-checkbox>

                                        <md-checkbox flex="20" ng-model="item.isSurvey" ng-change="setAffiliationDelivery(item, $index)" class="md-primary" aria-label="Survey" style="color: rgba(0,0,0,0.26);"> <b>Survey </b>&nbsp;&nbsp;&nbsp;&nbsp;</md-checkbox>

                                        <md-checkbox flex="25" ng-model="item.isQuestionHall" ng-change="setAffiliationDelivery(item, $index)" class="md-primary" aria-label="Question Hall" style="color: rgba(0,0,0,0.26);"> <b>Question Hall </b>&nbsp;&nbsp;&nbsp;&nbsp;</md-checkbox>

                                        <md-checkbox flex="20" ng-model="item.isBalcony" ng-change="setAffiliationDelivery(item, $index)" class="md-primary" aria-label="Balcon" style="color: rgba(0,0,0,0.26);"> <b> Balcony </b>&nbsp;&nbsp;&nbsp;&nbsp;</md-checkbox>

                                        <md-button data-ng-disabled="$index == 0" flex="10" ng-click="removeAffiliationData($index)"
                                                class="btn-w-md md-warn btn-block btn-xs">Remove</md-button>


                                    </div>
                                </div>
                            </div>

                            <md-input-container class="md-block">
                                <md-button ng-click="addAffiliationData()"
                                    class=" btn-w-md md-primary btn-block btn-xs">Add new Affiliation</md-button>
                            </md-input-container>


                        </md-content>
                    </div>
                </div>

            </div>

        </div>

    </div>







    <div class="panel panel-default" style="margin-top: 20px;">
        <div class="panel-heading">
            <h3 class="panel-title">Offer Details</h3>
        </div>
        <div class="panel-body">


            <div class="row">
                <div class="col-lg-12">


                    <div layout="column" ng-cloak class="md-inline-form">
                        <md-content layout-padding layout-margin layout-fill>

                            <div layout layout-sm="column" ng-show="isEdit">
                                <md-input-container flex="34" style="margin: 0px;">
                                    <label style="margin-bottom: 5px;">Status</label>
                                    <md-switch ng-model="this.offer.status" class="md-primary">
                                        <span class="label {{(offer.status) ? 'label-success' : 'label-danger'}}">{{(offer.status) ? 'ACTIVE' : 'INACTIVE'}}</span>
                                    </md-switch>
                                </md-input-container>
                            </div>






                            <div layout layout-sm="column">

                                <md-input-container flex="25" style="margin: 0px;">
                                    <label>HO Offer Code</label>
                                    <input required id="codeProvider" name="codeProvider" ng-model="offer.codeProvider">
                                    <div ng-messages="ctrl.form.codeProvider.$error" role="alert" multiple>
                                        <div ng-message="required" class="my-message">You must supply a HO code.</div>
                                    </div>
                                </md-input-container>

                            </div>




                            <div layout layout-sm="column">

                                                             



                                <md-input-container flex="50" style="margin: 0px;">
                                    <label>Offer Name</label>
                                    <input required id="offerName" name="offerName" ng-model="offer.name">
                                    <div ng-messages="ctrl.form.offerName.$error" role="alert" multiple>
                                        <div ng-message="required" class="my-message">You must supply a name.</div>
                                    </div>
                                </md-input-container>


                                <md-input-container flex="25" style="margin: 0px;">
                                    <label>Capping</label>
                                    <input required ng-pattern="/^[0-9]*$/" id="capping" name="capping" ng-model="offer.capping.number">
                                    <div ng-messages="ctrl.form.capping.$error" role="alert" multiple>
                                        <div ng-message="required" class="my-message">You must supply a capping
                                            number.
                                        </div>
                                        <div ng-message="pattern" class="my-message">Must have oly number</div>
                                    </div>
                                </md-input-container>


                                <md-input-container flex="25" style="margin: 0px;">
                                    <label>Frequencie</label>
                                    <md-select id="frequencie" required name ng-model="offer.capping.frequencie">
                                        <md-option value="daily">Daily</md-option>
                                        <md-option value="monthy">Monthy</md-option>
                                        <md-option value="total">Total</md-option>
                                    </md-select>
                                    <div ng-messages="ctrl.form.frequencie.$error" role="alert" multiple>
                                        <div ng-message="required" class="my-message">You must supply a Affiliation
                                            name.
                                        </div>
                                    </div>
                                </md-input-container>
                            </div>


                            


                        </md-content>
                    </div>
                </div>

            </div>

        </div>

    </div>




    <!-- ------------------------------------------------------------------------------------------------------------ 



    <div class="panel panel-default"
         ng-if="this.offer.isBalcony || this.offer.isSurvey || this.offer.isQuestionHall">
        <div class="panel-heading">
            <h3 class="panel-title">Main Question</h3>
        </div>
        <div class="panel-body">
            <question isOffer="true"/>
        </div>
    </div>-->





    <!-- ------------------------------------------------------------------------------------------------------------ -->



    <div class="panel panel-default" >
         <!--ng-if="this.offer.isBalcony || this.offer.isSurvey || this.offer.isQuestionHall"> -->
        <div class="panel-heading">
            <h3 class="panel-title">Main Question</h3>
        </div>
        <div class="panel-body">
          

                <div class="row">
                    <div class="col-lg-12">

                        <div layout="column" ng-cloak class="md-inline-form">
                            <md-content layout-padding layout-margin layout-fill>

                                <div layout layout-sm="column" style="padding-top: 10px;">
                                    <md-input-container flex style="margin: 0px;">
                                        <label>Main Question</label>
                                        <input required id="mainQuestionTitle" name="mainQuestionTitle"
                                               ng-model="offer.mainQuestion.title">
                                        <div ng-messages="ctrl.form.mainQuestionTitle.$error" role="alert" multiple>
                                            <div ng-message="required" class="my-message">You must supply a main question title.
                                            </div>
                                        </div>
                                    </md-input-container>

                                </div>

                                <div layout layout-sm="column" style="padding-top: 10px;">
                                    <md-input-container flex style="margin: 0px;">
                                        <label>Description</label>
                                        <input  id="mainQuestionDescription" name="mainQuestionDescription"
                                               ng-model="offer.mainQuestion.description">
                                        <div ng-messages="ctrl.form.mainQuestionDescription.$error" role="alert" multiple>
                                            <div ng-message="required" class="my-message">You must supply a question description.
                                            </div>
                                        </div>
                                    </md-input-container>

                                </div>

                                <div layout layout-sm="column" style="padding-top: 10px;">

                                    <div ui-tree="options" flex="100">
                                        <ol ui-tree-nodes ng-model="list">
                                            <li ng-repeat="item in offer.mainQuestion.answerList track by $index">

                                                <div class="angular-ui-tree-handle" data-nodrag style="cursor: default;">
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <div layout="column" ng-cloak class="md-inline-form">
                                                                <md-content>

                                                                    <div layout layout-sm="column" style="padding-top: 10px;  padding-bottom: 7px;">
                                                                        <md-input-container flex="100" style="margin: 0px;">
                                                                            <label>Answer {{($index)+1}}</label>
                                                                            <input required id="mainQuestionAnswer_{{$index}}" name="mainQuestionAnswer_{{$index}}"
                                                                                   ng-model="offer.mainQuestion.answerList[$index].answer">
                                                                            <div ng-messages="form['mainQuestionAnswer_'+$index].$error" role="alert"
                                                                                 multiple>
                                                                                <div ng-message="required" class="my-message">You must supply a
                                                                                    answer.
                                                                                </div>
                                                                            </div>
                                                                        </md-input-container>

                                                                        <md-input-container data-nodrag flex="50" style="margin: 0px;">
                                                                            <label>Actions</label>
                                                                            <md-select required id="mainQuestionAction_{{$index}}" name="mainQuestionAction_{{$index}}"
                                                                                       ng-change="choiseAction(offer.mainQuestion.answerList[$index].action.type, $index)"
                                                                                       ng-model="offer.mainQuestion.answerList[$index].action.type">

                                                                                <md-option value="delivery">Delivery lead</md-option>
                                                                                <md-option value="do_nothing">Do nothing</md-option>
                                                                                <md-option value="confirm_user_fields">Confirm user fields</md-option>
                                                                                <md-option value="open_new_input_field">Open new input field</md-option>
                                                                                <!--<md-option value="new_question"
                                                                                           ng-click="addSubQuestion('subQuestionSpace_'+subQuestionId, item)">
                                                                                    New question
                                                                                </md-option>-->

                                                                            </md-select>
                                                                            <div ng-messages="form['mainQuestionAction_'+$index].$error" role="alert"
                                                                                 multiple>
                                                                                <div ng-message="required" class="my-message">You must supply a action
                                                                                    name.
                                                                                </div>
                                                                            </div>
                                                                        </md-input-container>

                                                                        <md-input-container data-nodrag flex="10"
                                                                                            style="margin: 0px; margin-top: 10px;">
                                                                            &nbsp;&nbsp;<a href="" ng-click="removeItem($index)"
                                                                                           ng-show="offer.mainQuestion.answerList.length > 1">
                                                                            <span class="fa fa-times"></span>
                                                                        </a>&nbsp;&nbsp;
                                                                            <a href="" ng-click="newAnswer(this)"
                                                                               ng-show=" ($index)+1 === offer.mainQuestion.answerList.length">
                                                                                <span class="fa fa-plus"></span>
                                                                            </a>
                                                                        </md-input-container>

                                                                    </div>


                                                                    <!-- Confirm user fields -->
                                                                    <div layout layout-sm="column"
                                                                         style="padding-top: 10px; display: {{offer.mainQuestion.answerList[$index].action.textConfirmation ? 'flex' : 'none'}}"
                                                                         id="{{'confirmUserFields_'+$index}}">
                                                                        <md-input-container flex="100" style="margin: 0px;">
                                                                            <label>Text Confirmation</label>
                                                                            <input name="mainQuestionConfirm_{{$index}}"
                                                                                   ng-model="offer.mainQuestion.answerList[$index].action.textConfirmation">
                                                                            <div ng-messages="form['mainQuestionConfirm_'+$index].$error" role="alert"
                                                                                 multiple>
                                                                                <div ng-message="required" class="my-message">You must supply a text
                                                                                    confirmation.
                                                                                </div>
                                                                            </div>
                                                                        </md-input-container>
                                                                        
                                                                        <md-input-container flex="60" style="margin: 0px;">
                                                                            <label>Field Tag</label>
                                                                            <input name="mainQuestionFieldTag_{{$index}}"
                                                                                   ng-model="offer.mainQuestion.answerList[$index].action.fieldTag">
                                                                            <div ng-messages="form['mainQuestionFieldTag_'+$index].$error" role="alert"
                                                                                 multiple>
                                                                                <div ng-message="required" class="my-message">You must supply a
                                                                                    answer.
                                                                                </div>
                                                                            </div>
                                                                        </md-input-container>


                                                                        <md-input-container flex="60" style="margin: 0px;">
                                                                            <label>User Field</label>
                                                                            <md-select name="mainQuestionUserField_{{$index}}"
                                                                                       ng-model="offer.mainQuestion.answerList[$index].action.field">
                                                                                <md-option value="name">Name</md-option>
                                                                                <md-option value="email">Email</md-option>
                                                                                <md-option value="cellphone">Cellphone</md-option>
                                                                                <md-option value="telephone">Telephone</md-option>
                                                                                <md-option value="zipcode">Zipcode</md-option>

                                                                            </md-select>
                                                                            <div ng-messages="form['mainQuestionUserField_'+$index].$error.$error"
                                                                                 role="alert" multiple>
                                                                                <div ng-message="required" class="my-message">You must supply a
                                                                                    Affiliation
                                                                                    name.
                                                                                </div>
                                                                            </div>
                                                                        </md-input-container>
                                                                    </div>


                                                                    <!-- Input new Field -->
                                                                    <div layout layout-sm="column"
                                                                         style="padding-top: 10px; display: {{offer.mainQuestion.answerList[$index].action.textInput ? 'flex' : 'none'}}"
                                                                         id="{{'inputNewField_'+$index}}">
                                                                        <md-input-container flex="100" style="margin: 0px;">
                                                                            <label>Text Input</label>
                                                                            <input name="mainQuestionTextInput_{{$index}}"
                                                                                   ng-model="offer.mainQuestion.answerList[$index].action.textInput">
                                                                            <div ng-messages="form['mainQuestionTextInput_'+$index].$error" role="alert"
                                                                                 multiple>
                                                                                <div ng-message="required" class="my-message">You must supply a
                                                                                    answer.
                                                                                </div>
                                                                            </div>
                                                                        </md-input-container>
                                                                        <md-input-container flex="60" style="margin: 0px;">
                                                                            <label>Field Tag</label>
                                                                            <input name="mainQuestionFieldTag_{{$index}}"
                                                                                   ng-model="offer.mainQuestion.answerList[$index].action.fieldTag">
                                                                            <div ng-messages="form['mainQuestionFieldTag_'+$index].$error" role="alert"
                                                                                 multiple>
                                                                                <div ng-message="required" class="my-message">You must supply a
                                                                                    answer.
                                                                                </div>
                                                                            </div>
                                                                        </md-input-container>
                                                                    </div>


                                                                </md-content>
                                                            </div>
                                                        </div>

                                                    </div>

                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <!-- SUB QUESTIONS-->
                                                            <div id="{{'subQuestionSpace_'+subQuestionId}}"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                        </ol>
                                    </div>

                                </div>



                            </md-content>
                        </div>
                    </div>
                </div>

        </div>
    </div>









</form>
</div>
